<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous" />
</head>

<style>
  .card-body {
    flex: 1 1 auto;
    padding: 1.25rem;
  }

  *,
  *::before,
  *::after {
    box-sizing: border-box;
  }

  div {
    display: block;
  }

  body {
    background-color: #efefef;
  }
</style>


<body>
  
    <div class="header">

        <header class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0 shadow">
            <a class="navbar-brand col-md-2 col-lg-2 me-0 px-3 fs-6" href="#">Dashboard</a>
            <button class="navbar-toggler position-absolute d-md-none collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="col-md-8">
                <input class="form-control form-control-dark w-100 rounded-0 border-0" id="demo" type="number"
                 placeholder="Set Target Per Month" aria-label="Search">


      </div>


            <div class="col-md-1" >
                <div class="navbar-nav">
                    <div class="nav-item text-nowrap">
                      
                      <a class="nav-link px-3" style="border:0.2px solid rgb(136, 132, 132) ;" href="#" onclick="abc()">Save Target</a>


          </div>
        </div>

      </div>
      <div class="col-md-1">
        <div class="navbar-nav">
          <div class="nav-item text-nowrap">

            <a class="nav-link px-3" style="border:0.5px solid rgb(136, 132, 132)" href="{% url 'home' %}">Sign out</a>


          </div>
        </div>

      </div>

    </header>


          
    </div>  
    {% if message %}

    {% for message in message%}
    <div class="alert alert-danger" id="alert-message">{{message}}</div>
    {% endfor %}
  
    <script>
      setTimeout(function(){
        document.getElementById("alert-message").style.display="none";
  
      },3000)
    </script>
    {%endif%}

  
    <div class="alert alert-success" id="myAlert" style="display:none">
      <strong>Success!</strong> Target has been set successfully
    </div>
    <div class="alert alert-danger" id="myAlert1" style="display:none">
      <strong>Error!</strong> Please enter a value
    </div>
  <div class="row my-4" style="display: flex;
    flex-wrap: wrap;
    margin-right: -15px;
    margin-left: -15px;
    ">
    <div class="col-md-2">



    </div>
    <div class="col-md-3 col-xl-3" style="display:block;">
      <div class="card mb-3 widget-content bg-midnight-bloom"
        style="background-image: radial-gradient(circle 248px at center,#16d9e3 0%,#30c7ec 47%,#46aef7 100%)!important"
        ; font-size: .88rem; font-weight: 400; line-height:1.8; text-align: left">
        <div class="widget-content-wrapper text-black">
          <div class="widget-content-left mx-2" style="color:white ">
            <div class="widget-heading">Total Target</div>
            <div class="widget-subheading">Per Month</div>
          </div>
          <form method="post" action="{% url 'update_record' %}">
          <div class="widget-content-right">
            <div class="widget-numbers text-white mx-2" align="right " id="demo1">
              <span>{{target}}</span></div>
          </div>
        </form>
        </div>
      </div>
    </div>
    <div class="col-md-3 col-xl-3" style="display:block;">
      <div class="card mb-3 widget-content bg-midnight-bloom" style="background-image: linear-gradient(-20deg,#2b5876 0%,#4e4376 100%)!important;
    ;  font-size: .88rem;
        font-weight: 400;
        line-height:1.8;    text-align: left">
        <div class="widget-content-wrapper text-black">
          <div class="widget-content-left mx-2" style="color:white ">
            <div class="widget-heading">State Life</div>
            <div class="widget-subheading">Total Team Members</div>
          </div>
          <div class="widget-content-right">
            <div class="widget-numbers text-white mx-2" align="right ">{{length}}<span>
              </span></div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-3 col-xl-3" style="display:block">
      <div class="card mb-3 widget-content bg-midnight-bloom" style="    background-image: linear-gradient(to top,#0ba360 0%,#3cba92 100%)!important;
    " ; ; font-size: .88rem; font-weight: 400; line-height:1.8; text-align: left">
        <div class="widget-content-wrapper text-black">
          <div class="widget-content-left mx-2" style="color:white ">
            <div class="widget-heading">Target Acheived</div>
            <div class="widget-subheading">Per Month</div>
          </div>
          <div class="widget-content-right">
            <div class="widget-numbers text-white mx-2" align="right "><span>{{update}}</span></div>
          </div>
        </div>
      </div>
    </div>





  </div>

  <div class="row">
    <div class="col-md-2">

    </div>
    <div class="col-md-9">
      <div class="page-content page-container" id="page-content">
        <div class="padding">
          <div class="row container d-flex justify-content-center">
            <div class="col-lg-12 grid-margin stretch-card">
              <div class="card">
                <div class="card-body">
                  <h4 class="card-title">Team Members</h4>
                  <p class="card-description">

                  </p>
                  <div class="table-responsive">
                    <table class="table table-striped">
                      <thead>
                        <tr>
                          <th>ID</th>
                          <th>Name</th>
                          <th>Email</th>
                          <th>Progress</th>
                          <th>Amount</th>
                          
                        </tr>
                      </thead>
                      <tbody>
                        {% for task, progress in status %}
                        
                        <tr>
                          
                          <td>{{task.team_id}}</td>
                          <td>{{task.team_name}}</td>
                          <td>{{task.team_email}}</td>
                          <td>
                            <div class="progress">
                              <div class="progress-bar bg-success" role="progressbar" style="width:{% widthratio progress.team_progress progress.target_sales 100 %}%"
                                aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                          </td>
                          <td>{{progress.team_progress}}</td>
                          

                         
                          
                          <td> 
                            <a href="{% url 'delete' task.team_id%}"> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">
                              <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/>
                              <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/>
                            </svg></a>
                          
                          </td>
                          

                        </tr>
                        {% endfor %}

                      </tbody>
                      

                    </table>
                    <div class="container my-3" >
          
                      <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal" >
                        Add Member
                                </button>
                      
                    
                    <!-- Modal -->
                    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                      <div class="modal-dialog" role="document">
                        <div class="modal-content">
                          <div class="modal-header"> 
                            <!-- <h5 class="modal-title" id="exampleModalLabel">Team Details</h5> -->
                            <div class="container">
                              <form method="POST" action="#">
                                <div class="form-group my-1">
                                  <label for="name">Name</label>
                                  <input type="text" class="form-control" id="name" name="teamname" aria-describedby="emailHelp" placeholder="Enter name">
                                </div>
                                <div class="form-group my-1">
                                  <label for="exampleInputEmail1">Email address</label>
                                  <input type="email" class="form-control" id="email" name="emailteam" aria-describedby="emailHelp" placeholder=" @teams.com" onblur="validateEmail()">
                                </div>
                                <div class="form-group">
                                  <label for="exampleInputPassword1">Password</label>
                                  <input type="password" class="form-control" id="pass" name="teampass" placeholder="Password">
                                </div>
                                <div class="my-2">
                                  <div class="btn-layer"></div>
                                  <button  class="btn btn-primary" type="submit"  onclick="clear()"  value="Submit">Submit</button>
                                </div>
                                
                                <!-- <button type="submit" class="btn btn-primary my-2">Submit</button> -->
                              </form>
                            
                            </div>
                            </button>
                          </div>
                          <div class="modal-body">
                      
                          </div>
                          <!-- <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-primary">Save changes</button>
                          </div> -->
                        </div>
                      </div>
                    </div>
                  </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>


    </div>

  </div>

  








    </div>
    <!-- Button trigger modal -->


    
    


<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

</body>
<script>
  
  function abc(){
      var b=document.getElementById('demo').value;
      var c=document.getElementById('demo1').innerHTML=b;
      fetch("update_record", {
        method: 'POST',
        body: JSON.stringify({"target":b}),
        headers: {
            'Content-Type': 'application/json',
        },
        credentials: 'same-origin',
    }).then((response) => {
    console.log("Record updated successfully!")
})

      
      console.log(c)
    var alert=document.getElementById('myAlert')
    var alert1=document.getElementById('myAlert1')

    var d=document.getElementById('a')
    if(b==0){
      alert1.style.display = "block";
      


      setTimeout(function(){
      alert1.style.display = "none";
      }, 3000);

    }

    else{
      alert.style.display = "block";
setTimeout(function(){
  alert.style.display = "none";
}, 3000);

    }

  }

  let clear=()=>{
    let name=document.getElementById("name").value=""
    let email=document.getElementById("email").value=""

    let pass=document.getElementById("pass").value=""

  }
  
</script>

</html>